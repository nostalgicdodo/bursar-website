(window.webpackJsonp_disable_gutenberg_autosave=window.webpackJsonp_disable_gutenberg_autosave||[]).push([[1],{9:function(e,t,a){}}]),function(e){function t(t){for(var n,i,o=t[0],l=t[1],u=t[2],c=0,v=[];c<o.length;c++)i=o[c],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&v.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(b&&b(t);v.length;)v.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={0:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window.webpackJsonp_disable_gutenberg_autosave=window.webpackJsonp_disable_gutenberg_autosave||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var b=l;r.push([8,1]),a()}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.editPost},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.apiFetch},function(e,t){e.exports=window.wp.compose},function(e,t){e.exports=window.wp.plugins},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),r=a(3),i=a(2),o=a(6),l=a(4),u=a(7),b=a(5),c=a.n(b);a(9);const v=[{label:Object(s.__)("10 seconds","disable-gutenberg-autosave"),value:10},{label:Object(s.__)("30 seconds","disable-gutenberg-autosave"),value:30},{label:Object(s.__)("1 minute","disable-gutenberg-autosave")+" ("+Object(s.__)("default","disable-gutenberg-autosave")+")",value:60},{label:Object(s.__)("5 minutes","disable-gutenberg-autosave"),value:300},{label:Object(s.__)("10 minutes","disable-gutenberg-autosave"),value:600},{label:Object(s.__)("30 minutes","disable-gutenberg-autosave"),value:1800},{label:Object(s.__)("Disabled","disable-gutenberg-autosave"),value:99999}];class d extends n.Component{constructor(e){super(e),this.state={interval:0,error:!1},this.apiGetInterval=this.apiGetInterval.bind(this),this.apiSetInterval=this.apiSetInterval.bind(this),this.editorUpdateInterval=this.editorUpdateInterval.bind(this)}apiGetInterval(){c()({path:"/disable-gutenberg-autosave/v1/interval"}).then(e=>{this.setState({interval:e,error:!1})},e=>{this.setState({interval:99999,error:e.message})})}apiSetInterval(){this.state.error||c()({path:"/disable-gutenberg-autosave/v1/interval",method:"POST",data:{interval:parseInt(this.state.interval)}})}editorUpdateInterval(){this.props.updateEditorSettings({...this.props.editorSettings,autosaveInterval:parseInt(this.state.interval)})}componentDidMount(){this.apiGetInterval()}componentDidUpdate(e,t){this.state.interval&&(t.interval&&0!==t.interval&&t.interval!==this.state.interval&&this.apiSetInterval(),this.props.editorSettings.autosaveInterval&&this.props.editorSettings.autosaveInterval!==this.state.interval&&this.editorUpdateInterval())}render(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(r.PluginSidebarMoreMenuItem,{target:"disable-gutenberg-autosave-sidebar"},Object(s.__)("Disable Gutenberg Autosave","disable-gutenberg-autosave")),Object(n.createElement)(r.PluginSidebar,{name:"disable-gutenberg-autosave-sidebar",title:Object(s.__)("Autosave settings","disable-gutenberg-autosave")},Object(n.createElement)(i.PanelBody,{className:"disable-gutenberg-autosave-settings"},!this.state.interval&&Object(n.createElement)("p",null,Object(s.__)("Loading...","disable-gutenberg-autosave")),!!this.state.interval&&this.state.error&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("h2",{className:"disable-gutenberg-autosave-header"},Object(s.__)("API error:","disable-gutenberg-autosave")),Object(n.createElement)("p",{className:"disable-gutenberg-autosave-error"},this.state.error),Object(n.createElement)("p",null,Object(s.__)("Autosave is disabled anyway, but you cannot set custom intervals.","disable-gutenberg-autosave")),Object(n.createElement)(i.Button,{className:"button button-primary",onClick:()=>{this.setState({interval:0,error:!1}),this.apiGetInterval()}},Object(s.__)("Try again","disable-gutenberg-autosave"))),!!this.state.interval&&!this.state.error&&Object(n.createElement)(i.RadioControl,{label:Object(s.__)("Autosave interval","disable-gutenberg-autosave"),options:v,selected:parseInt(this.state.interval),onChange:e=>this.setState({interval:parseInt(e)})}),Object(n.createElement)("br",null),Object(n.createElement)("strong",null,Object(s.__)("Editor status","disable-gutenberg-autosave")),Object(n.createElement)("ul",{style:{marginTop:4}},Object(n.createElement)("li",null,`${Object(s.__)("Is edited post dirty","disable-gutenberg-autosave")}: ${this.props.isDirty}`),Object(n.createElement)("li",null,`${Object(s.__)("Is edited post autosaveable","disable-gutenberg-autosave")}: ${this.props.isAutosaveable}`),Object(n.createElement)("li",null,`${Object(s.__)("Is autosaving","disable-gutenberg-autosave")}: ${this.props.isAutosaving}`),Object(n.createElement)("li",null,`${Object(s.__)("Autosave interval","disable-gutenberg-autosave")}: ${this.props.interval}`),Object(n.createElement)("li",null,`${Object(s.__)("Local autosave interval","disable-gutenberg-autosave")}: ${this.props.localInterval}`)),Object(n.createElement)(i.Button,{isPrimary:!0,text:Object(s.__)("Autosave now","disable-gutenberg-autosave"),disabled:this.props.isAutosaving,isBusy:this.props.isAutosaving,onClick:()=>{this.props.autosave()}}))))}}const p=Object(o.compose)([Object(l.withSelect)(e=>{const{isEditedPostDirty:t,isEditedPostAutosaveable:a,isAutosavingPost:n,getEditorSettings:s}=e("core/editor"),r=s();return{editorSettings:r,isDirty:t(),isAutosaveable:a(),isAutosaving:n(),interval:r.autosaveInterval,localInterval:r.__experimentalLocalAutosaveInterval||r.localAutosaveInterval}}),Object(l.withDispatch)(e=>({updateEditorSettings:e("core/editor").updateEditorSettings,autosave:e("core/editor").autosave}))])(d);Object(u.registerPlugin)("wsd-disable-gutenberg-autosave",{icon:"backup",render:p})}]);